---
layout: null
permalink: /api/tasks.json
---
{
  "tasks": [
    {% for task in site.tasks %}
    {
      "title": {{ task.title | jsonify }},
      "status": {{ task.status | jsonify }},
      "phase": {{ task.phase | jsonify }},
      "category": {{ task.category | jsonify }},
      "order": {{ task.order | jsonify }},
      "url": "{{ site.url }}{{ task.url }}",
      "content_preview": {{ task.content | strip_html | truncatewords: 20 | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ],
  "statistics": {
    "total": {{ site.tasks | size }},
    "open": {{ site.tasks | where: "status", "open" | size }},
    "completed": {{ site.tasks | where: "status", "completed" | size }},
    "phases": {{ site.tasks | group_by: "phase" | size }}
  },
  "last_updated": "{{ site.time | date_to_xmlschema }}"
}